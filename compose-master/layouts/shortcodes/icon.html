{{- $_hugo_config := `{ "version": 1, "inline": true }` -}}

{{- $src := .Get "src" -}}
{{- $alt := .Get "alt" | safeHTMLAttr -}}
{{- $img := .Page.Resources.GetMatch (path.Base $src) -}}

{{- if not $img -}}
  {{- errorf "icon shortcode: image '%s' not found in Page Bundle for page %s" $src .Page.Path -}}
{{- end -}}

{{- printf "<img src=\"%s\" alt=\"%s\" width=\"%d\" height=\"%d\" class=\"icons-img\">" $img.RelPermalink $alt $img.Width $img.Height | safeHTML -}}